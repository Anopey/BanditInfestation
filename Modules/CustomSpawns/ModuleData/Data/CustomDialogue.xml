<!-- 

Dialogue is read each time a campaign is started or loaded.

Boolean operations cannot be put in paranthesis just yet. The whole statement is read from left to right for now, operations on the left taking precedence. 
Future versions should address this issue.

RECOGNIZED CONDITIONS 

HasPartyID(ID)
PartyIDStartsWith(Prefix)
PartyIDEndsWith(Suffix)
PartyIsInFaction(FactionID)
IsHero(HeroID)

FirstTimeTalkWithHero
IsFriendly
IsHostile
IsDefending
IsAttacking
BarterSuccessful USE THIS ONLY DIRECTLY INSIDE A BARTER.

RECOGNIZED LOGIC

AND: AND & &&
OR: OR | ||
NOT: !

RECOGNIZED CONSEQUENCES. War, Peace, BarterPeace are not yet tested and probably will not work as expected since the Diplomacy System of Custom Spawns is pretty bad right now.

Leave
Battle
War
Peace
Surrender(isPlayer) Enter true or false as parameter. case insensitive.

BARTER CONSEQUENCES are like regular consequences but they have to be attached to a line that the player will never see. This is how the TW system works currently, or at least I couldn't find an easy way to circumvent it. Check examples in Calradia at War for barters.

BarterPeace
BarterNoAttack 

ALTERNATIVE DIALOGUES

Alternative dialogues exist to help with creating variants of a parent without having to copy paste the children.

An alternative dialogue has the same children as its parent in the hierarchy. It is not a child dialogue of its XML parent, but instead has the same children as its parent.
This way, either the dialogue or the alternative dialogue can be an entry to the same dialogue tree while having different conditions, texts, and consequences!

PLAYER ATTRIBUTE

if set to false this is just NPC dialogue.

if set to true this is player dialogue. If multiple player dialogues are triggered at once, then they are displayed as options.

-->

<root>

<!-- BANDITS -->

	<Dialogue condition = "HasPartyID(cs_mountain_raider_squad_template) AND IsAttacking" text = "Aye, what do we 'ave here?">
		<AlternativeDialogue condition = "HasPartyID(cs_mountain_raider_squad_template) AND IsDefending" text = "Aye, m'lord?"/>

		<Dialogue condition = "IsAttacking" text = "Just a walking purse, sir." player = "true" >
			<Dialogue text = "Aye, spill 'em coins then.">
				<Dialogue text = "Ze screen text that no one will see" consequence = "BarterNoAttack">
					<Dialogue condition = "BarterSuccessful" text = "Aye, that should be enough.">
					
					</Dialogue>
					<Dialogue condition = "!BarterSuccessful" text = "Ye an empty purse 'pparently.">

					</Dialogue>
				</Dialogue>
			</Dialogue>
		</Dialogue>
		<Dialogue condition = "IsAttacking" text = "No need to posture! We surrender." consequence = "Surrender(true)" player = "true">
			
		</Dialogue>
		<Dialogue condition = "IsAttacking" text = "Some steel for you thieving rascals!" consequence = "Battle" player = "true">

		</Dialogue>
		<Dialogue condition = "IsDefending" text = "I hear you and your lads have been terrorizing the locals?" consequence = "Battle" player = "true">
			<Dialogue text = "Impossible, m'lord! We are but humble peasants.">
				<Dialogue text = "A thief, and a liar? Prepare to die." consequence = "Battle" player = "true">

				</Dialogue>
				<Dialogue text = "Ah, I see. You may go then." consequence = "Leave" player = "true">
			
				</Dialogue>
			</Dialogue>
		</Dialogue>

	</Dialogue>

	<Dialogue condition = "HasPartyID(cs_mountain_raider_boss_squad_template) AND IsAttacking" text = "Heh, ye aren't very fortunate today, ar ye?">
		<AlternativeDialogue condition = "HasPartyID(cs_mountain_raider_boss_squad_template) AND IsDefending" text = "Aye, m'lord?"/>

		<Dialogue condition = "IsAttacking" text = "Oh, but my dear sir, it is said that those with coin are always granted God's blessings." player = "true" >
			<Dialogue text = "Aye, spill 'em coins then. And don't ye use 'em big words.">
				<Dialogue text = "Ze screen text that no one will see" consequence = "BarterNoAttack">
					<Dialogue condition = "BarterSuccessful" text = "Aye, that should be enough.">
					
					</Dialogue>
					<Dialogue condition = "!BarterSuccessful" text = "It looks like ye only got words.">

					</Dialogue>
				</Dialogue>
			</Dialogue>
		</Dialogue>
		<Dialogue condition = "IsAttacking" text = "It seems so. We surrender." consequence = "Surrender(true)" player = "true">
			
		</Dialogue>
		<Dialogue condition = "IsAttacking" text = "Don't get cocky, rascal. A couple mountain thieves are no match for my men!" consequence = "Battle" player = "true">

		</Dialogue>
		<Dialogue condition = "IsDefending" text = "I hear you and your lads have been terrorizing the locals?" consequence = "Battle" player = "true">
			<Dialogue text = "Impossible, m'lord! We are but a caravan.">
				<Dialogue text = "Heh, do you take me for a fool?" consequence = "Battle" player = "true">

				</Dialogue>
				<Dialogue text = "Ah, I see. You may go then." consequence = "Leave" player = "true">
			
				</Dialogue>
			</Dialogue>
		</Dialogue>

	</Dialogue>

	<Dialogue condition = "HasPartyID(cs_forest_trainer_group) OR HasPartyID(cs_forest_ambushers) OR HasPartyID(cs_forest_giant_trainer_group) AND IsAttacking"
		text = "Stepped into the wrong woods I'm afraid.">
		<AlternativeDialogue condition = "HasPartyID(cs_forest_trainer_group) OR HasPartyID(cs_forest_ambushers) OR HasPartyID(cs_forest_giant_trainer_group) AND IsDefending"
		text = "Yes, my lord?"/>

		<Dialogue condition = "IsAttacking" text = "No need to shoot! We can perhaps arrange something." player = "true" >
			<Dialogue text = "It better be a good arrangement.">
				<Dialogue text = "Ze screen text that no one will see" consequence = "BarterNoAttack">
					<Dialogue condition = "BarterSuccessful" text = "Aye, that should be enough.">
					
					</Dialogue>
					<Dialogue condition = "!BarterSuccessful" text = "Ye an empty purse 'pparently.">

					</Dialogue>
				</Dialogue>
			</Dialogue>
		</Dialogue>
		<Dialogue condition = "IsAttacking" text = "I'm afraid you are correct. We surrender." consequence = "Surrender(true)" player = "true">
			
		</Dialogue>
		<Dialogue condition = "IsAttacking" text = "Oh, you should be afraid!" consequence = "Battle" player = "true">

		</Dialogue>
		<Dialogue condition = "IsDefending" text = "I hear you and your lads have been terrorizing the locals?" consequence = "Battle" player = "true">
			<Dialogue text = "We'll fight until we draw our last breath!" consequence = "Battle">

			</Dialogue>
		</Dialogue>

		<Dialogue condition = "IsDefending" text = "Nothing. I wish you a good day." consequence = "Leave" player = "true">

		</Dialogue>

	</Dialogue>

<!-- -->

<!-- DESERTERS -->

	<Dialogue condition = "PartyIsInFaction(cs_battania_deserters) AND IsHostile" text = "Yet another adventurer playing at the art of war. You and your kind have ravaged these lands at the cost of us soldiers.">

	</Dialogue>

<!-- -->


</root>